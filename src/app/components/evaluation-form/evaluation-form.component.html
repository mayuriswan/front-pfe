<div *ngIf="form" class="container mt-5">
  <div class="card">
    <div class="card-header text-center">
      <h2>{{ form.name }}</h2>
    </div>
    <div class="card-body">
      <div class="progress-bar">
        <div *ngFor="let step of form.steps; let i = index" [class.active]="i === currentStepIndex"
          [class.completed]="i < currentStepIndex" class="step">
          Step {{i + 1}}
        </div>
      </div>
      <form>
        <div *ngIf="form.steps && form.steps.length > 0">
          <h3>Step {{ form.steps.currentStepIndex }}: {{ form.steps[currentStepIndex].name }}</h3>
          <div *ngFor="let field of form.steps[currentStepIndex].fields" class="mb-3">
            <div [ngSwitch]="field.type">
              <div *ngSwitchCase="'text'" class="form-group">
                <label>{{ field.name }}</label>
                <input type="text" class="form-control">
              </div>
              <div *ngSwitchCase="'date'" class="form-group">
                <label>{{ field.name }}</label>
                <input type="date" class="form-control">
              </div>
              <div *ngSwitchCase="'number'" class="form-group">
                <label>{{ field.name }}</label>
                <input type="number" class="form-control">
              </div>
              <div *ngSwitchCase="'file'" class="form-group">
                <label>{{ field.name }}</label>
                <input type="file" class="form-control">
              </div>
              <div *ngSwitchCase="'select'" class="form-group">
                <label>{{ field.name }}</label>
                <select multiple class="form-control">
                  <option *ngFor="let option of getOptions(field.options)">{{ option }}</option>
                </select>
              </div>
              <div *ngSwitchCase="'radio'" class="form-group">
                <label>{{ field.name }}</label>
                <div *ngFor="let option of getOptions(field.options)" class="form-check">
                  <input type="checkbox" [id]="option" [value]="option" class="form-check-input">
                  <label [for]="option" class="form-check-label">{{ option }}</label>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="d-flex justify-content-between mt-3">
          <button type="button" class="btn btn-secondary" (click)="previousStep()"
            [disabled]="isFirstStep()">Previous</button>
          <button *ngIf="!isLastStep()" type="button" class="btn btn-primary" (click)="nextStep()">Next</button>
          <button *ngIf="isLastStep()" type="submit" class="btn btn-success">Submit</button>
        </div>
      </form>
    </div>
  </div>
</div>